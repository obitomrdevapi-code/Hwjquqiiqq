const express = require("express");
const axios = require("axios");
const cheerio = require("cheerio");

const router = express.Router();

// ูุงุฆู ุงูุฃุณุฆูุฉ
const questionsBank = {
  categories: ["ุซูุงููุฉ", "ุฅุณูุงููุฉ", "ูุฑุฉ ุงููุฏู", "ุชุฑููููุฉ", "ุนูููุฉ", "ุฑูุงุถูุฉ"],
  difficulties: ["ุณูู", "ูุชูุณุท", "ุตุนุจ"],
  
  // ุงูุฃุณุฆูุฉ ุงูุซูุงููุฉ
  ุซูุงููุฉ: {
    ุณูู: [
      {
        ุณุคุงู: "ูุง ูู ุนุงุตูุฉ ูุฑูุณุงุ",
        ุฅุฌุงุจุฉ: "ุจุงุฑูุณ",
        ุฎูุงุฑุงุช: ["ููุฏู", "ุจุงุฑูุณ", "ุฑููุง", "ุจุฑููู"]
      },
      {
        ุณุคุงู: "ูู ูู ูุคูู ุฑูุงูุฉ 'ุงูุจุคุณุงุก'ุ",
        ุฅุฌุงุจุฉ: "ูููุชูุฑ ููุบู",
        ุฎูุงุฑุงุช: ["ูููุชูุฑ ููุบู", "ุดุงุฑูุฒ ุฏูููุฒ", "ููู ุชููุณุชูู", "ุฃูููุฑูู ุฏู ุจูุฒุงู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููุบุฉ ุงูุฑุณููุฉ ูู ุงูุจุฑุงุฒููุ",
        ุฅุฌุงุจุฉ: "ุงูุจุฑุชุบุงููุฉ",
        ุฎูุงุฑุงุช: ["ุงูุฅุณุจุงููุฉ", "ุงูุจุฑุชุบุงููุฉ", "ุงูุฅูุฌููุฒูุฉ", "ุงููุฑูุณูุฉ"]
      },
      {
        ุณุคุงู: "ูู ุฃู ุนุงู ุงูุชูุช ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉุ",
        ุฅุฌุงุจุฉ: "1945",
        ุฎูุงุฑุงุช: ["1944", "1945", "1946", "1947"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุทูู ููุฑ ูู ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "ููุฑ ุงูููู",
        ุฎูุงุฑุงุช: ["ููุฑ ุงูุฃูุงุฒูู", "ููุฑ ุงูููู", "ููุฑ ุงููุณูุณูุจู", "ููุฑ ุงููุงูุบุชุณู"]
      },
      {
        ุณุคุงู: "ูู ุฑุณู ููุญุฉ 'ุงููููุงููุฒุง'ุ",
        ุฅุฌุงุจุฉ: "ููููุงุฑุฏู ุฏุงููุดู",
        ุฎูุงุฑุงุช: ["ุจููุงุณู", "ูุงู ุฌูุฎ", "ููููุงุฑุฏู ุฏุงููุดู", "ููููู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุนููุฉ ุงูุฑุณููุฉ ูู ุงููุงุจุงูุ",
        ุฅุฌุงุจุฉ: "ุงููู",
        ุฎูุงุฑุงุช: ["ุงููู", "ุงูููุงู", "ุงูุฏููุงุฑ", "ุงูุฑูุจูุฉ"]
      },
      {
        ุณุคุงู: "ูู ุนุฏุฏ ูุงุฑุงุช ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "7",
        ุฎูุงุฑุงุช: ["5", "6", "7", "8"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃูุจุฑ ูุญูุท ูู ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "ุงููุญูุท ุงููุงุฏุฆ",
        ุฎูุงุฑุงุช: ["ุงููุญูุท ุงููุงุฏุฆ", "ุงููุญูุท ุงูุฃุทูุณู", "ุงููุญูุท ุงูููุฏู", "ุงููุญูุท ุงููุชุฌูุฏ ุงูุดูุงูู"]
      },
      {
        ุณุคุงู: "ูู ูู ููุชุดู ุฃูุฑููุงุ",
        ุฅุฌุงุจุฉ: "ูุฑูุณุชููุฑ ูููููุจูุณ",
        ุฎูุงุฑุงุช: ["ูุฑูุณุชููุฑ ูููููุจูุณ", "ูุงุณูู ุฏู ุบุงูุง", "ุฃููุฑูุบู ูุณุจูุชุดู", "ูุงุฌูุงู"]
      }
    ],
    ูุชูุณุท: [
      {
        ุณุคุงู: "ูุง ูู ุนุงุตูุฉ ุฃุณุชุฑุงููุงุ",
        ุฅุฌุงุจุฉ: "ูุงูุจุฑุง",
        ุฎูุงุฑุงุช: ["ุณูุฏูู", "ููุจูุฑู", "ูุงูุจุฑุง", "ุจุฑูุฒุจุงู"]
      },
      {
        ุณุคุงู: "ูู ูู ูุคูู ูุณุฑุญูุฉ 'ูุงููุช'ุ",
        ุฅุฌุงุจุฉ: "ูููุงู ุดูุณุจูุฑ",
        ุฎูุงุฑุงุช: ["ูููุงู ุดูุณุจูุฑ", "ุฃูุณูุงุฑ ูุงููุฏ", "ุฌูุฑุฌ ุจุฑูุงุฑุฏ ุดู", "ุตูููู ุจูููุช"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃูุฏู ุฌุงูุนุฉ ูู ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "ุฌุงูุนุฉ ุงููุฑูููู",
        ุฎูุงุฑุงุช: ["ุฌุงูุนุฉ ุงููุฑูููู", "ุฌุงูุนุฉ ุงูุฃุฒูุฑ", "ุฌุงูุนุฉ ุจูููููุง", "ุฌุงูุนุฉ ุฃูุณููุฑุฏ"]
      },
      {
        ุณุคุงู: "ูู ุฃู ูุงุฑุฉ ุชูุน ุฏููุฉ ุชุดูููุ",
        ุฅุฌุงุจุฉ: "ุฃูุฑููุง ุงูุฌููุจูุฉ",
        ุฎูุงุฑุงุช: ["ุฃูุฑููุง ุงูุดูุงููุฉ", "ุฃูุฑููุง ุงูุฌููุจูุฉ", "ุฃูุฑูุจุง", "ุขุณูุง"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุทูู ุฌุณุฑ ูู ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "ุฌุณุฑ ุฏุงููุงูุบ-ูููุดุงู ุงููุจูุฑ",
        ุฎูุงุฑุงุช: ["ุฌุณุฑ ุฏุงููุงูุบ-ูููุดุงู ุงููุจูุฑ", "ุฌุณุฑ ุจุญูุฑุฉ ุจููุชุดุงุฑุชุฑูู", "ุฌุณุฑ ุงูููู ููุฏ", "ุฌุณุฑ ุงูุจูุณููุฑ"]
      }
    ],
    ุตุนุจ: [
      {
        ุณุคุงู: "ูู ูู ุงููููุณูู ุงูุฐู ูุงู: 'ุฃูุง ุฃููุฑ ุฅุฐู ุฃูุง ููุฌูุฏ'ุ",
        ุฅุฌุงุจุฉ: "ุฑูููู ุฏููุงุฑุช",
        ุฎูุงุฑุงุช: ["ุฑูููู ุฏููุงุฑุช", "ุฃููุงุทูู", "ุฃุฑุณุทู", "ุณูุฑุงุท"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููุบุฉ ุงูุชู ูุชุจุช ุจูุง ูุฎุทูุทุงุช ุงูุจุญุฑ ุงูููุชุ",
        ุฅุฌุงุจุฉ: "ุงูุขุฑุงููุฉ",
        ุฎูุงุฑุงุช: ["ุงูุขุฑุงููุฉ", "ุงูุนุจุฑูุฉ", "ุงููููุงููุฉ", "ุงููุงุชูููุฉ"]
      },
      {
        ุณุคุงู: "ูู ูู ูุคุณุณ ุนูู ุงูุฌุจุฑุ",
        ุฅุฌุงุจุฉ: "ุงูุฎูุงุฑุฒูู",
        ุฎูุงุฑุงุช: ["ุงูุฎูุงุฑุฒูู", "ุงุจู ุณููุง", "ุงูุจูุฑููู", "ุงูุจุชุงูู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃูุฏู ูุจูู ูู ุงูุนุงูู ูุง ูุฒุงู ูุงุฆูุงูุ",
        ุฅุฌุงุจุฉ: "ูุฑู ุฒูุณุฑ",
        ุฎูุงุฑุงุช: ["ูุฑู ุฒูุณุฑ", "ุณุชููููุฌ", "ุฃูุฑุงูุงุช ุงูุฌูุฒุฉ", "ูุนุจุฏ ุงูุฃูุตุฑ"]
      },
      {
        ุณุคุงู: "ูู ูู ูุคูู ูุชุงุจ 'ุงูุนูุฏ ุงูุงุฌุชูุงุนู'ุ",
        ุฅุฌุงุจุฉ: "ุฌุงู ุฌุงู ุฑูุณู",
        ุฎูุงุฑุงุช: ["ุฌุงู ุฌุงู ุฑูุณู", "ุชููุงุณ ููุจุฒ", "ุฌูู ููู", "ูููุชุณููู"]
      }
    ]
  },

  // ุงูุฃุณุฆูุฉ ุงูุฅุณูุงููุฉ
  ุฅุณูุงููุฉ: {
    ุณูู: [
      {
        ุณุคุงู: "ูู ุนุฏุฏ ุฃุฑูุงู ุงูุฅุณูุงูุ",
        ุฅุฌุงุจุฉ: "5",
        ุฎูุงุฑุงุช: ["5", "6", "4", "7"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃูู ุดูุฑ ูู ุงูุชูููู ุงููุฌุฑูุ",
        ุฅุฌุงุจุฉ: "ุงููุญุฑู",
        ุฎูุงุฑุงุช: ["ุงููุญุฑู", "ุตูุฑ", "ุฑุจูุน ุงูุฃูู", "ุฑุฌุจ"]
      },
      {
        ุณุคุงู: "ูู ูู ุฃูู ูุจูุ",
        ุฅุฌุงุจุฉ: "ุขุฏู",
        ุฎูุงุฑุงุช: ["ุขุฏู", "ููุญ", "ุฅุจุฑุงููู", "ููุณู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุขุฎุฑ ุณูุฑุฉ ูู ุงููุฑุขูุ",
        ุฅุฌุงุจุฉ: "ุงููุงุณ",
        ุฎูุงุฑุงุช: ["ุงููุงุณ", "ุงูููู", "ุงูุฅุฎูุงุต", "ุงููุณุฏ"]
      },
      {
        ุณุคุงู: "ูู ุนุฏุฏ ุณูุฑ ุงููุฑุขูุ",
        ุฅุฌุงุจุฉ: "114",
        ุฎูุงุฑุงุช: ["114", "113", "115", "112"]
      }
    ],
    ูุชูุณุท: [
      {
        ุณุคุงู: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุณูู ููุจ ุงููุฑุขูุ",
        ุฅุฌุงุจุฉ: "ูุณ",
        ุฎูุงุฑุงุช: ["ูุณ", "ุงูุฑุญูู", "ุงููุงูุนุฉ", "ุงูููู"]
      },
      {
        ุณุคุงู: "ูู ูู ุงูุตุญุงุจู ุงููููุจ ุจุณูู ุงููู ุงููุณูููุ",
        ุฅุฌุงุจุฉ: "ุฎุงูุฏ ุจู ุงููููุฏ",
        ุฎูุงุฑุงุช: ["ุฎุงูุฏ ุจู ุงููููุฏ", "ุนูุฑู ุจู ุงูุนุงุต", "ุณุนุฏ ุจู ุฃุจู ููุงุต", "ุนูู ุจู ุฃุจู ุทุงูุจ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุทูู ุณูุฑุฉ ูู ุงููุฑุขูุ",
        ุฅุฌุงุจุฉ: "ุงูุจูุฑุฉ",
        ุฎูุงุฑุงุช: ["ุงูุจูุฑุฉ", "ุขู ุนูุฑุงู", "ุงููุณุงุก", "ุงููุงุฆุฏุฉ"]
      },
      {
        ุณุคุงู: "ูู ุนุฏุฏ ุงูุฃูุจูุงุก ุงููุฐููุฑูู ูู ุงููุฑุขูุ",
        ุฅุฌุงุจุฉ: "25",
        ุฎูุงุฑุงุช: ["25", "20", "30", "35"]
      },
      {
        ุณุคุงู: "ูู ูู ุฃูู ูุคุฐู ูู ุงูุฅุณูุงูุ",
        ุฅุฌุงุจุฉ: "ุจูุงู ุจู ุฑุจุงุญ",
        ุฎูุงุฑุงุช: ["ุจูุงู ุจู ุฑุจุงุญ", "ุนุจุฏ ุงููู ุจู ุฃู ููุชูู", "ุฃุจู ูุญุฐูุฑุฉ", "ุณุนุฏ ุงููุฑุธ"]
      }
    ],
    ุตุนุจ: [
      {
        ุณุคุงู: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ูู ุชุจุฏุฃ ุจุงูุจุณููุฉุ",
        ุฅุฌุงุจุฉ: "ุงูุชูุจุฉ",
        ุฎูุงุฑุงุช: ["ุงูุชูุจุฉ", "ุงูุฃููุงู", "ุงููุฌุงุฏูุฉ", "ุงูุญุฏูุฏ"]
      },
      {
        ุณุคุงู: "ูู ูู ุงูุตุญุงุจู ุงูุฐู ุงูุชุฒ ูููุชู ุนุฑุด ุงูุฑุญููุ",
        ุฅุฌุงุจุฉ: "ุณุนุฏ ุจู ูุนุงุฐ",
        ุฎูุงุฑุงุช: ["ุณุนุฏ ุจู ูุนุงุฐ", "ุญูุฒุฉ ุจู ุนุจุฏ ุงููุทูุจ", "ุฃุจู ุจูุฑ ุงูุตุฏูู", "ุนูุฑ ุจู ุงูุฎุทุงุจ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุทูู ุขูุฉ ูู ุงููุฑุขูุ",
        ุฅุฌุงุจุฉ: "ุขูุฉ ุงูุฏูู ูู ุณูุฑุฉ ุงูุจูุฑุฉ",
        ุฎูุงุฑุงุช: ["ุขูุฉ ุงูุฏูู ูู ุณูุฑุฉ ุงูุจูุฑุฉ", "ุขูุฉ ุงููุฑุณู", "ุฃูู ุขูุฉ ูู ุณูุฑุฉ ุงููุณุงุก", "ุขูุฉ ุงูููุฑุงุซ"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุจู ุงูุฐู ุณูู ุจู 'ุฐู ุงูููู'ุ",
        ุฅุฌุงุจุฉ: "ูููุณ",
        ุฎูุงุฑุงุช: ["ูููุณ", "ููุณู", "ุฃููุจ", "ุฅุฏุฑูุณ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุณูุฑุฉ ุงูุชู ุชุณูู ุจุณูุฑุฉ ุงููุจูุ",
        ุฅุฌุงุจุฉ: "ุงูุชุญุฑูู",
        ุฎูุงุฑุงุช: ["ุงูุชุญุฑูู", "ุงูุฃุญุฒุงุจ", "ุงููุชุญ", "ุงููุตุฑ"]
      }
    ]
  },

  // ุฃุณุฆูุฉ ูุฑุฉ ุงููุฏู
  "ูุฑุฉ ุงููุฏู": {
    ุณูู: [
      {
        ุณุคุงู: "ูู ุนุฏุฏ ูุงุนุจู ูุฑุฉ ุงููุฏู ูู ูู ูุฑููุ",
        ุฅุฌุงุจุฉ: "11",
        ุฎูุงุฑุงุช: ["11", "10", "12", "9"]
      },
      {
        ุณุคุงู: "ูุง ูู ูุฏุฉ ุงููุจุงุฑุงุฉ ุงูุฑุณููุฉ ูู ูุฑุฉ ุงููุฏูุ",
        ุฅุฌุงุจุฉ: "90 ุฏูููุฉ",
        ุฎูุงุฑุงุช: ["90 ุฏูููุฉ", "80 ุฏูููุฉ", "100 ุฏูููุฉ", "120 ุฏูููุฉ"]
      },
      {
        ุณุคุงู: "ูู ูู ุฃูุถู ูุงุนุจ ูู ุงูุนุงูู 2023ุ",
        ุฅุฌุงุจุฉ: "ูููููู ููุณู",
        ุฎูุงุฑุงุช: ["ูููููู ููุณู", "ูุฑูุณุชูุงูู ุฑููุงูุฏู", "ููููุงู ูุจุงุจู", "ุฅุฑูููุบ ูุงูุงูุฏ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููุฑูู ุงูุฐู ูุงุฒ ุจูุฃุณ ุงูุนุงูู 2022ุ",
        ุฅุฌุงุจุฉ: "ุงูุฃุฑุฌูุชูู",
        ุฎูุงุฑุงุช: ["ุงูุฃุฑุฌูุชูู", "ูุฑูุณุง", "ุงูุจุฑุงุฒูู", "ุฃููุงููุง"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุจุทููุฉ ุงูุฃูู ูู ุฃูุฑูุจุง ููุฃูุฏูุฉุ",
        ุฅุฌุงุจุฉ: "ุฏูุฑู ุฃุจุทุงู ุฃูุฑูุจุง",
        ุฎูุงุฑุงุช: ["ุฏูุฑู ุฃุจุทุงู ุฃูุฑูุจุง", "ุงูุฏูุฑู ุงูุฃูุฑูุจู", "ูุฃุณ ุงูุนุงูู ููุฃูุฏูุฉ", "ูุฃุณ ุงูุณูุจุฑ ุงูุฃูุฑูุจู"]
      }
    ],
    ูุชูุณุท: [
      {
        ุณุคุงู: "ูู ูู ุงููุฏุงู ุงูุชุงุฑูุฎู ููุฑุฉ ุงููุฏูุ",
        ุฅุฌุงุจุฉ: "ูุฑูุณุชูุงูู ุฑููุงูุฏู",
        ุฎูุงุฑุงุช: ["ูุฑูุณุชูุงูู ุฑููุงูุฏู", "ูููููู ููุณู", "ุจูููู", "ุฑููุงุฑูู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููุฑูู ุงูุฐู ูุงุฒ ุจุฏูุฑู ุฃุจุทุงู ุฃูุฑูุจุง 2023ุ",
        ุฅุฌุงุจุฉ: "ูุงูุดุณุชุฑ ุณูุชู",
        ุฎูุงุฑุงุช: ["ูุงูุดุณุชุฑ ุณูุชู", "ุฑูุงู ูุฏุฑูุฏ", "ุจุงูุฑู ููููุฎ", "ุชุดููุณู"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุฏุฑุจ ุงูุฐู ูุงุฒ ุจุฃูุจุฑ ุนุฏุฏ ูู ุฏูุฑู ุฃุจุทุงู ุฃูุฑูุจุงุ",
        ุฅุฌุงุจุฉ: "ูุงุฑูู ุฃูุดูููุชู",
        ุฎูุงุฑุงุช: ["ูุงุฑูู ุฃูุดูููุชู", "ุจูุจ ุบูุงุฑุฏูููุง", "ุฒูู ุงูุฏูู ุฒูุฏุงู", "ุฃูููุณ ููุฑุฌุณูู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุฌุงุฆุฒุฉ ุงููุฑุฏูุฉ ุงูุฃูู ูู ูุฑุฉ ุงููุฏูุ",
        ุฅุฌุงุจุฉ: "ูุฑุฉ ุงูุฐูุจ",
        ุฎูุงุฑุงุช: ["ูุฑุฉ ุงูุฐูุจ", "ุงูุญุฐุงุก ุงูุฐูุจู", "ุฌุงุฆุฒุฉ ุงูุฃูุถู ูู ุงููููุง", "ุฌุงุฆุฒุฉ ุฃูุถู ูุงุนุจ ูู ุฃูุฑูุจุง"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุงุนุจ ุงูุฐู ุณุฌู ุฃูุจุฑ ุนุฏุฏ ูู ุงูุฃูุฏุงู ูู ููุณู ูุงุญุฏุ",
        ุฅุฌุงุจุฉ: "ูููููู ููุณู",
        ุฎูุงุฑุงุช: ["ูููููู ููุณู", "ูุฑูุณุชูุงูู ุฑููุงูุฏู", "ุฌูุฑุฏ ูููุฑ", "ุจูููู"]
      }
    ],
    ุตุนุจ: [
      {
        ุณุคุงู: "ูู ูู ุงููุงุนุจ ุงููุญูุฏ ุงูุฐู ูุงุฒ ุจูุฃุณ ุงูุนุงูู ูุน ุซูุงุซุฉ ููุชุฎุจุงุช ูุฎุชููุฉ ููุฏุฑุจุ",
        ุฅุฌุงุจุฉ: "ูู ูุญุฏุซ ูุฐุง ูู ูุจู",
        ุฎูุงุฑุงุช: ["ูู ูุญุฏุซ ูุฐุง ูู ูุจู", "ููุชูุฑูู ุจูุฒู", "ูุงุฑูู ุฒุงุบุงูู", "ูุฑุงูุฒ ุจูููุจุงูุฑ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููุฑูู ุงูุฐู ูู ููุจุท ูุท ูู ุงูุฏุฑุฌุฉ ุงูุฃููู ูู ุฅูุฌูุชุฑุงุ",
        ุฅุฌุงุจุฉ: "ุฃุฑุณูุงู",
        ุฎูุงุฑุงุช: ["ุฃุฑุณูุงู", "ูุงูุดุณุชุฑ ูููุงูุชุฏ", "ูููุฑุจูู", "ุชุดููุณู"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุฏุงู ุงูุชุงุฑูุฎู ููุฃุณ ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "ููุฑูุณูุงู ูููุฒู",
        ุฎูุงุฑุงุช: ["ููุฑูุณูุงู ูููุฒู", "ุฑููุงูุฏู", "ุฌูุฑุฏ ูููุฑ", "ุจูููู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃูุฏู ูุงุฏู ูุฑุฉ ูุฏู ูู ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "ุดููููุฏ",
        ุฎูุงุฑุงุช: ["ุดููููุฏ", "ููุชุณ ูุงููุชู", "ุฑูุงู ูุฏุฑูุฏ", "ูุงูุดุณุชุฑ ูููุงูุชุฏ"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุงุนุจ ุงูุฐู ูุงุฒ ุจุฃูุจุฑ ุนุฏุฏ ูู ูุฑุงุช ุงูุฐูุจุ",
        ุฅุฌุงุจุฉ: "ูููููู ููุณู",
        ุฎูุงุฑุงุช: ["ูููููู ููุณู", "ูุฑูุณุชูุงูู ุฑููุงูุฏู", "ูููุงู ูุฑููู", "ููุดูู ุจูุงุชููู"]
      }
    ]
  },

  // ุงูุฃุณุฆูุฉ ุงูุชุฑููููุฉ
  ุชุฑููููุฉ: {
    ุณูู: [
      {
        ุณุคุงู: "ูุง ูู ุงุณู ูููุฉ ุจุฑูุทุงููุง ุงูุญุงููุฉุ",
        ุฅุฌุงุจุฉ: "ุฅููุฒุงุจูุซ ุงูุซุงููุฉ",
        ุฎูุงุฑุงุช: ["ุฅููุฒุงุจูุซ ุงูุซุงููุฉ", "ูููุชูุฑูุง", "ุขู", "ูุงุฑู"]
      },
      {
        ุณุคุงู: "ูู ูู ุจุทู ูููู 'ุชุงูุชูู'ุ",
        ุฅุฌุงุจุฉ: "ููููุงุฑุฏู ุฏู ูุงุจุฑูู",
        ุฎูุงุฑุงุช: ["ููููุงุฑุฏู ุฏู ูุงุจุฑูู", "ุจุฑุงุฏ ุจูุช", "ุฌููู ุฏูุจ", "ุชูู ูุฑูุฒ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุดูุฑ ูููุน ุชูุงุตู ุงุฌุชูุงุนูุ",
        ุฅุฌุงุจุฉ: "ููุณุจูู",
        ุฎูุงุฑุงุช: ["ููุณุจูู", "ุชููุชุฑ", "ุงูุณุชุบุฑุงู", "ุชูู ุชูู"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุบููุฉ ุงูุชู ุชููุจ ุจู 'ูููุฉ ุงูุจูุจ'ุ",
        ุฅุฌุงุจุฉ: "ูุงุฏููุง",
        ุฎูุงุฑุงุช: ["ูุงุฏููุง", "ุจุฑูุชูู ุณุจูุฑุฒ", "ููุฏู ุบุงุบุง", "ุจูููุณูู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงุณู ูุณูุณู ุงูุชููู ุงูุดููุฑุ",
        ุฅุฌุงุจุฉ: "ุตุฑุงุน ุงูุนุฑูุด",
        ุฎูุงุฑุงุช: ["ุตุฑุงุน ุงูุนุฑูุด", "vikings", "the walking dead", "breaking bad"]
      }
    ],
    ูุชูุณุท: [
      {
        ุณุคุงู: "ูู ูู ูุฎุฑุฌ ูููู 'ุงูุนุฑุงุจ'ุ",
        ุฅุฌุงุจุฉ: "ูุฑุงูุณูุณ ููุฑุฏ ููุจููุง",
        ุฎูุงุฑุงุช: ["ูุฑุงูุณูุณ ููุฑุฏ ููุจููุง", "ูุงุฑุชู ุณููุฑุณูุฒู", "ุณุชููู ุณุจููุจุฑุบ", "ุฃููุฑูุฏ ููุชุดููู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููููู ุงูุญุงุตู ุนูู ุฃูุจุฑ ุนุฏุฏ ูู ุฌูุงุฆุฒ ุงูุฃูุณูุงุฑุ",
        ุฅุฌุงุจุฉ: "ุชุงูุชูู",
        ุฎูุงุฑุงุช: ["ุชุงูุชูู", "ุณูุฏ ุงูุฎูุงุชู", "ุจู ููุฑ", "ุงูุนุฑุงุจ"]
      },
      {
        ุณุคุงู: "ูู ูู ูุคูู ุณูุณูุฉ ูุงุฑู ุจูุชุฑุ",
        ุฅุฌุงุจุฉ: "ุฌ. ู. ุฑููููุฌ",
        ุฎูุงุฑุงุช: ["ุฌ. ู. ุฑููููุฌ", "ุชููููู", "ุฌูุฑุฌ ุขุฑ. ุขุฑ. ูุงุฑุชู", "ุณุชููู ูููุบ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงุณู ูุบูู ูุฑูุฉ ุงูุจูุชูุฒ ุงูุฐู ุงุบุชููุ",
        ุฅุฌุงุจุฉ: "ุฌูู ููููู",
        ุฎูุงุฑุงุช: ["ุฌูู ููููู", "ุจูู ููุงุฑุชูู", "ุฌูุฑุฌ ูุงุฑูุณูู", "ุฑููุบู ุณุชุงุฑ"]
      },
      {
        ุณุคุงู: "ูู ูู ุงูููุซู ุงูุฐู ูุนุจ ุฏูุฑ ุฌููุณ ุจููุฏ ูุฃุทูู ูุชุฑุฉุ",
        ุฅุฌุงุจุฉ: "ุฑูุฌุฑ ููุฑ",
        ุฎูุงุฑุงุช: ["ุฑูุฌุฑ ููุฑ", "ุดูู ูููุฑู", "ุฏุงููุงู ูุฑูุฌ", "ุจูุฑุณ ุจุฑูุณูุงู"]
      }
    ],
    ุตุนุจ: [
      {
        ุณุคุงู: "ูุง ูู ุฃูู ูููู ุฑุณูู ูุชุญุฑูุฉ ุทููู ูู ุฅูุชุงุฌ ุฏูุฒููุ",
        ุฅุฌุงุจุฉ: "ุณูู ูุงูุช ูุงูุฃูุฒุงู ุงูุณุจุนุฉ",
        ุฎูุงุฑุงุช: ["ุณูู ูุงูุช ูุงูุฃูุฒุงู ุงูุณุจุนุฉ", "ุจูููููู", "ุณูุฏุฑููุง", "ุจุงูุจู"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุฎุฑุฌ ุงููุญูุฏ ุงูุฐู ูุงุฒ ุจุซูุงุซุฉ Oscars ูุฃูุถู ูุฎุฑุฌุ",
        ุฅุฌุงุจุฉ: "ูุฑุงูู ูุงุจุฑุง",
        ุฎูุงุฑุงุช: ["ูุฑุงูู ูุงุจุฑุง", "ุฌูู ููุฑุฏ", "ููููุงู ูุงููุฑ", "ุจููู ูุงููุฏุฑ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููุณูุณู ุงูุชููุฒูููู ุงูุฃุทูู ุนูุฑุงู ูู ุงูุชุงุฑูุฎุ",
        ุฅุฌุงุจุฉ: "ุฏูุชูุฑ ูู",
        ุฎูุงุฑุงุช: ["ุฏูุชูุฑ ูู", "ุงููุดุญุฐ", "sesame street", "the simpsons"]
      },
      {
        ุณุคุงู: "ูู ูู ุงููุคูู ุงูุฐู ูุชุจ ูุนุธู ุฑูุงูุงุชู ุชุญุช ุงุณู ูุณุชุนุงุฑุ",
        ุฅุฌุงุจุฉ: "ุณุชููู ูููุบ",
        ุฎูุงุฑุงุช: ["ุณุชููู ูููุบ", "ุฃุบุงุซุง ูุฑูุณุชู", "ุขุฑุซุฑ ูููุงู ุฏููู", "ุฌูุฑุฌ ุฃูุฑููู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููููู ุงูุฐู ุญุตู ุนูู ุฃุนูู ุชูููู ุนูู ูููุน IMDbุ",
        ุฅุฌุงุจุฉ: "ุงูุนุฑุงุจ",
        ุฎูุงุฑุงุช: ["ุงูุนุฑุงุจ", "ุงูุฎูุงู", "ุงููุฑุณุงู", "ูุงุฆูุฉ ุดูุฏูุฑ"]
      }
    ]
  },

  // ุงูุฃุณุฆูุฉ ุงูุนูููุฉ
  ุนูููุฉ: {
    ุณูู: [
      {
        ุณุคุงู: "ูุง ูู ุงููููุจ ุงูุฃูุฑุจ ุฅูู ุงูุดูุณุ",
        ุฅุฌุงุจุฉ: "ุนุทุงุฑุฏ",
        ุฎูุงุฑุงุช: ["ุนุทุงุฑุฏ", "ุงูุฒูุฑุฉ", "ุงูุฃุฑุถ", "ุงููุฑูุฎ"]
      },
      {
        ุณุคุงู: "ูู ุนุฏุฏ ุนุธุงู ุฌุณู ุงูุฅูุณุงูุ",
        ุฅุฌุงุจุฉ: "206",
        ุฎูุงุฑุงุช: ["206", "200", "210", "196"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุบุงุฒ ุงูุฃูุซุฑ ููุฑุฉ ูู ุงูุบูุงู ุงูุฌูู ููุฃุฑุถุ",
        ุฅุฌุงุจุฉ: "ุงูููุชุฑูุฌูู",
        ุฎูุงุฑุงุช: ["ุงูููุชุฑูุฌูู", "ุงูุฃูุณุฌูู", "ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู", "ุงูููุฏุฑูุฌูู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุณุฑุน ุญููุงู ุจุฑูุ",
        ุฅุฌุงุจุฉ: "ุงูููุฏ",
        ุฎูุงุฑุงุช: ["ุงูููุฏ", "ุงูุฃุณุฏ", "ุงูููุฑ", "ุงูุบุฒุงู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงููุนุฏู ุงูุณุงุฆู ูู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุบุฑูุฉุ",
        ุฅุฌุงุจุฉ: "ุงูุฒุฆุจู",
        ุฎูุงุฑุงุช: ["ุงูุฒุฆุจู", "ุงูุฐูุจ", "ุงููุถุฉ", "ุงููุญุงุณ"]
      }
    ],
    ูุชูุณุท: [
      {
        ุณุคุงู: "ูุง ูู ุฃุตุบุฑ ุนุธู ูู ุฌุณู ุงูุฅูุณุงูุ",
        ุฅุฌุงุจุฉ: "ุนุธู ุงูุฑูุงุจ",
        ุฎูุงุฑุงุช: ["ุนุธู ุงูุฑูุงุจ", "ุนุธู ุงูุณูุฏุงู", "ุนุธู ุงููุทุฑูุฉ", "ุนุธู ุงููุนุจุฑุฉ"]
      },
      {
        ุณุคุงู: "ูู ุนุฏุฏ ุงููุฑูููุณููุงุช ูู ุงูุฎููุฉ ุงูุจุดุฑูุฉุ",
        ุฅุฌุงุจุฉ: "46",
        ุฎูุงุฑุงุช: ["46", "23", "48", "42"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุนูู ูุญูุท ูู ุงูุนุงููุ",
        ุฅุฌุงุจุฉ: "ุงููุญูุท ุงููุงุฏุฆ",
        ุฎูุงุฑุงุช: ["ุงููุญูุท ุงููุงุฏุฆ", "ุงููุญูุท ุงูุฃุทูุณู", "ุงููุญูุท ุงูููุฏู", "ุงููุญูุท ุงููุชุฌูุฏ ุงูุดูุงูู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุนูุตุฑ ุงูููููุงุฆู ุงูุฐู ุฑูุฒู 'Au'ุ",
        ุฅุฌุงุจุฉ: "ุงูุฐูุจ",
        ุฎูุงุฑุงุช: ["ุงูุฐูุจ", "ุงููุถุฉ", "ุงูุฃููููููู", "ุงูุฃุฑุฌูู"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃูุฑุจ ูุฌู ุฅูู ุงูุฃุฑุถุ",
        ุฅุฌุงุจุฉ: "ุงูุดูุณ",
        ุฎูุงุฑุงุช: ["ุงูุดูุณ", "ุจุฑููุณููุง ุณูุชูุฑู", "ุณูุฑููุณ", "ุงููุณุฑ ุงููุงูุน"]
      }
    ],
    ุตุนุจ: [
      {
        ุณุคุงู: "ูุง ูู ุงููุธุฑูุฉ ุงูุชู ูุถุนูุง ุฃููุดุชุงูู ูุดุฑุญ ุงูุฌุงุฐุจูุฉุ",
        ุฅุฌุงุจุฉ: "ุงููุธุฑูุฉ ุงููุณุจูุฉ ุงูุนุงูุฉ",
        ุฎูุงุฑุงุช: ["ุงููุธุฑูุฉ ุงููุณุจูุฉ ุงูุนุงูุฉ", "ุงููุธุฑูุฉ ุงููุณุจูุฉ ุงูุฎุงุตุฉ", "ูุธุฑูุฉ ุงููู", "ูุธุฑูุฉ ุงูุฃูุชุงุฑ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุตู ูููุฉ 'ููููุงุก'ุ",
        ุฅุฌุงุจุฉ: "ูุตุฑู",
        ุฎูุงุฑุงุช: ["ูุตุฑู", "ูููุงูู", "ุนุฑุจู", "ูุงุฑุณู"]
      },
      {
        ุณุคุงู: "ูู ูู ููุชุดู ุงูุจูุณูููุ",
        ุฅุฌุงุจุฉ: "ุฃููุณูุฏุฑ ููููุฌ",
        ุฎูุงุฑุงุช: ["ุฃููุณูุฏุฑ ููููุฌ", "ูููุณ ุจุงุณุชูุฑ", "ุฑูุจุฑุช ููุฎ", "ุฌูุฒู ููุณุชุฑ"]
      },
      {
        ุณุคุงู: "ูุง ูู ุฃุณุฑุน ุดูุก ูู ุงููููุ",
        ุฅุฌุงุจุฉ: "ุงูุถูุก",
        ุฎูุงุฑุงุช: ["ุงูุถูุก", "ุงูุตูุช", "ุงูุตุงุฑูุฎ", "ุงูุทุงุฆุฑุฉ"]
      },
      {
        ุณุคุงู: "ูู ุชุจูุบ ุณุฑุนุฉ ุงูุถูุก ุจุงููููููุชุฑ ูู ุงูุซุงููุฉุ",
        ุฅุฌุงุจุฉ: "300,000",
        ุฎูุงุฑุงุช: ["300,000", "150,000", "450,000", "600,000"]
      }
    ]
  },

  // ุงูุฃุณุฆูุฉ ุงูุฑูุงุถูุฉ
  ุฑูุงุถูุฉ: {
    ุณูู: [
      {
        ุณุคุงู: "ูุง ูู ูุงุชุฌ 5 ร 5ุ",
        ุฅุฌุงุจุฉ: "25",
        ุฎูุงุฑุงุช: ["25", "20", "30", "15"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุนุฏุฏ ุงูุฃูููุ",
        ุฅุฌุงุจุฉ: "ุงูุนุฏุฏ ุงูุฐู ููุจู ุงููุณูุฉ ุนูู ููุณู ูุงููุงุญุฏ ููุท",
        ุฎูุงุฑุงุช: [
          "ุงูุนุฏุฏ ุงูุฐู ููุจู ุงููุณูุฉ ุนูู ููุณู ูุงููุงุญุฏ ููุท",
          "ุงูุนุฏุฏ ุงูุฒูุฌู",
          "ุงูุนุฏุฏ ุงููุฑุฏู",
          "ุงูุนุฏุฏ ุงูุฐู ููุจู ุงููุณูุฉ ุนูู 2"
        ]
      },
      {
        ุณุคุงู: "ูุง ูู ูุญูุท ุงูุฏุงุฆุฑุฉุ",
        ุฅุฌุงุจุฉ: "2 ร ฯ ร ูุตู ุงููุทุฑ",
        ุฎูุงุฑุงุช: [
          "2 ร ฯ ร ูุตู ุงููุทุฑ",
          "ฯ ร ูุตู ุงููุทุฑยฒ",
          "4 ร ฯ ร ูุตู ุงููุทุฑ",
          "ฯ ร ุงููุทุฑ"
        ]
      },
      {
        ุณุคุงู: "ูุง ูู ูุงุชุฌ 12 รท 4ุ",
        ุฅุฌุงุจุฉ: "3",
        ุฎูุงุฑุงุช: ["3", "4", "2", "6"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุนุฏุฏ ุงูุชุงูู ูู ุงููุชุชุงููุฉ: 2, 4, 6, 8, ...ุ",
        ุฅุฌุงุจุฉ: "10",
        ุฎูุงุฑุงุช: ["10", "9", "12", "14"]
      }
    ],
    ูุชูุณุท: [
      {
        ุณุคุงู: "ูุง ูู ูููุฉ ฯ ุชูุฑูุจุงูุ",
        ุฅุฌุงุจุฉ: "3.14",
        ุฎูุงุฑุงุช: ["3.14", "2.71", "1.61", "4.13"]
      },
      {
        ุณุคุงู: "ูุง ูู ูุงููู ููุซุงุบูุฑุณุ",
        ุฅุฌุงุจุฉ: "ูุฑุจุน ุงููุชุฑ = ูุฑุจุน ุงูุถูุน ุงูุฃูู + ูุฑุจุน ุงูุถูุน ุงูุซุงูู",
        ุฎูุงุฑุงุช: [
          "ูุฑุจุน ุงููุชุฑ = ูุฑุจุน ุงูุถูุน ุงูุฃูู + ูุฑุจุน ุงูุถูุน ุงูุซุงูู",
          "ูุฑุจุน ุงูุถูุน = ูุฑุจุน ุงููุชุฑ + ูุฑุจุน ุงูุถูุน ุงูุขุฎุฑ",
          "ุงููุชุฑ = ุงูุถูุน ุงูุฃูู + ุงูุถูุน ุงูุซุงูู",
          "ูุฑุจุน ุงููุชุฑ = ุงูุถูุน ุงูุฃูู ร ุงูุถูุน ุงูุซุงูู"
        ]
      },
      {
        ุณุคุงู: "ูุง ูู ูุงุชุฌ 15ยฒุ",
        ุฅุฌุงุจุฉ: "225",
        ุฎูุงุฑุงุช: ["225", "125", "325", "275"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ููุนุฏุฏ 64ุ",
        ุฅุฌุงุจุฉ: "8",
        ุฎูุงุฑุงุช: ["8", "6", "7", "9"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุนุฏุฏ ุงูุฃููู ุจูู ุงูุฃุนุฏุงุฏ ุงูุชุงููุฉ: 15, 17, 21, 25ุ",
        ุฅุฌุงุจุฉ: "17",
        ุฎูุงุฑุงุช: ["17", "15", "21", "25"]
      }
    ],
    ุตุนุจ: [
      {
        ุณุคุงู: "ูุง ูู ูุงุชุฌ ุชูุงูู xยฒุ",
        ุฅุฌุงุจุฉ: "(xยณ/3) + C",
        ุฎูุงุฑุงุช: ["(xยณ/3) + C", "xยณ + C", "2x + C", "(xยฒ/2) + C"]
      },
      {
        ุณุคุงู: "ูุง ูู ุงูุนุฏุฏ ุงูุฐูุจูุ",
        ุฅุฌุงุจุฉ: "(1 + โ5)/2",
        ุฎูุงุฑุงุช: ["(1 + โ5)/2", "(1 + โ3)/2", "ฯ", "e"]
      },
      {
        ุณุคุงู: "ูุง ูู ูุดุชู ุงูุฏุงูุฉ e^xุ",
        ุฅุฌุงุจุฉ: "e^x",
        ุฎูุงุฑุงุช: ["e^x", "x * e^x", "e^(x-1)", "ln(x)"]
      },
      {
        ุณุคุงู: "ูุง ูู ูุงุชุฌ ุงูุฌูุน ูู 1 ุฅูู 100ุ",
        ุฅุฌุงุจุฉ: "5050",
        ุฎูุงุฑุงุช: ["5050", "5000", "5100", "4950"]
      },
      {
        ุณุคุงู: "ูุง ูู ุนุฏุฏ ุฃุถูุงุน ุงูููุนุจุ",
        ุฅุฌุงุจุฉ: "12",
        ุฎูุงุฑุงุช: ["12", "8", "6", "10"]
      }
    ]
  }
};

// ุฏุงูุฉ ูุฅูุดุงุก ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ
questionsBank.generateQuestions = function(category, difficulty, count = 10) {
  if (!this[category] || !this[category][difficulty]) {
    return {
      status: false,
      error: `โ๏ธ ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูู ุงููุฆุฉ ${category} ูุงููุณุชูู ${difficulty}`
    };
  }

  const availableQuestions = this[category][difficulty];
  const selectedQuestions = [];
  
  // ุฅุฐุง ูุงู ุงูุนุฏุฏ ุงููุทููุจ ุฃูุจุฑ ูู ุงููุชููุฑุ ูุนูุฏ ูู ุงูุฃุณุฆูุฉ
  const questionsCount = Math.min(count, availableQuestions.length);
  
  // ุฅูุดุงุก ูุณุฎุฉ ูู ุงูุฃุณุฆูุฉ ุงููุชุงุญุฉ ูุชุฌูุจ ุงูุชูุฑุงุฑ
  const questionsCopy = [...availableQuestions];
  
  for (let i = 0; i < questionsCount; i++) {
    if (questionsCopy.length === 0) break;
    
    const randomIndex = Math.floor(Math.random() * questionsCopy.length);
    selectedQuestions.push(questionsCopy[randomIndex]);
    questionsCopy.splice(randomIndex, 1);
  }

  return {
    status: true,
    data: {
      category,
      difficulty,
      count: selectedQuestions.length,
      questions: selectedQuestions
    }
  };
};

// ุฏุงูุฉ ููุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุงูุฃุณุฆูุฉ
questionsBank.getStats = function() {
  const stats = {};
  
  this.categories.forEach(category => {
    stats[category] = {};
    this.difficulties.forEach(difficulty => {
      if (this[category] && this[category][difficulty]) {
        stats[category][difficulty] = this[category][difficulty].length;
      }
    });
  });
  
  return stats;
};

/**
 * ููุทุฉ ุงูููุงูุฉ ุงูุฑุฆูุณูุฉ - ุงูุญุตูู ุนูู ุฃุณุฆูุฉ
 * ูุซุงู:
 *   GET /api/questions?category=ุซูุงููุฉ&difficulty=ุณูู&count=5
 */
router.get("/tst", async (req, res) => {
  const { category, difficulty, count = 10 } = req.query;
  
  if (!category || !difficulty) {
    return res.status(400).json({
      status: 400,
      success: false,
      message: "โ๏ธ ูุฑุฌู ุชูุฏูู ุงููุฆุฉ ูุงููุณุชูู",
      example: `${global.t}/api/questions?category=ุซูุงููุฉ&difficulty=ุณูู&count=5`,
      available_categories: questionsBank.categories,
      available_difficulties: questionsBank.difficulties
    });
  }

  try {
    const result = questionsBank.generateQuestions(category, difficulty, parseInt(count));

    if (!result.status) {
      return res.status(404).json({
        status: 404,
        success: false,
        message: result.error
      });
    }

    res.json({
      status: 200,
      success: true,
      data: result.data
    });
    
  } catch (err) {
    console.error('Questions API Error:', err.message);
    
    res.status(500).json({
      status: 500,
      success: false,
      message: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงูุฃุณุฆูุฉ",
      error: err.message
    });
  }
});

/**
 * ููุทุฉ ุงูููุงูุฉ - ุฅุญุตุงุฆูุงุช ุงูุฃุณุฆูุฉ
 * ูุซุงู:
 *   GET /api/questions/stats
 */
router.get("/tst/stats", async (req, res) => {
  try {
    const stats = questionsBank.getStats();
    
    res.json({
      status: 200,
      success: true,
      data: {
        total_categories: questionsBank.categories.length,
        difficulties: questionsBank.difficulties,
        statistics: stats
      }
    });
    
  } catch (err) {
    res.status(500).json({
      status: 500,
      success: false,
      message: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงูุฅุญุตุงุฆูุงุช",
      error: err.message
    });
  }
});

/**
 * ููุทุฉ ุงูููุงูุฉ - ุงููุฆุงุช ูุงููุณุชููุงุช ุงููุชุงุญุฉ
 * ูุซุงู:
 *   GET /api/questions/categories
 */
router.get("/tst/categories", async (req, res) => {
  try {
    res.json({
      status: 200,
      success: true,
      data: {
        categories: questionsBank.categories,
        difficulties: questionsBank.difficulties
      }
    });
    
  } catch (err) {
    res.status(500).json({
      status: 500,
      success: false,
      message: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงููุฆุงุช",
      error: err.message
    });
  }
});

/**
 * ููุทุฉ ุงูููุงูุฉ - ุงูุชุญูู ูู ุงูุฅุฌุงุจุฉ
 * ูุซุงู:
 *   POST /api/questions/verify
 *   body: { question: "ุณุคุงู", answer: "ุฅุฌุงุจุฉ ุงููุณุชุฎุฏู" }
 */
router.post("/questions/verify", async (req, res) => {
  const { question, userAnswer } = req.body;
  
  if (!question || !userAnswer) {
    return res.status(400).json({
      status: 400,
      success: false,
      message: "โ๏ธ ูุฑุฌู ุชูุฏูู ุงูุณุคุงู ูุงูุฅุฌุงุจุฉ"
    });
  }

  try {
    // ุงูุจุญุซ ุนู ุงูุณุคุงู ูู ุฌููุน ุงููุฆุงุช ูุงููุณุชููุงุช
    let correctAnswer = null;
    let found = false;
    
    for (const category of questionsBank.categories) {
      for (const difficulty of questionsBank.difficulties) {
        if (questionsBank[category] && questionsBank[category][difficulty]) {
          const questionObj = questionsBank[category][difficulty].find(
            q => q.sุคุงู === question
          );
          
          if (questionObj) {
            correctAnswer = questionObj.ุฅุฌุงุจุฉ;
            found = true;
            break;
          }
        }
      }
      if (found) break;
    }

    if (!found) {
      return res.status(404).json({
        status: 404,
        success: false,
        message: "โ๏ธ ุงูุณุคุงู ุบูุฑ ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช"
      });
    }

    const isCorrect = userAnswer.trim().toLowerCase() === correctAnswer.trim().toLowerCase();
    
    res.json({
      status: 200,
      success: true,
      data: {
        question,
        userAnswer,
        correctAnswer,
        isCorrect,
        message: isCorrect ? "๐ ุงูุฅุฌุงุจุฉ ุตุญูุญุฉ!" : "โ ุงูุฅุฌุงุจุฉ ุฎุงุทุฆุฉ"
      }
    });
    
  } catch (err) {
    console.error('Verification API Error:', err.message);
    
    res.status(500).json({
      status: 500,
      success: false,
      message: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุญูู ูู ุงูุฅุฌุงุจุฉ",
      error: err.message
    });
  }
});

/**
 * ููุทุฉ ุงูููุงูุฉ - ุงูุญุงูุฉ ุงูุตุญูุฉ ููุฎุฏูุฉ
 * ูุซุงู:
 *   GET /api/questions/status
 */
router.get("/questions/status", async (req, res) => {
  try {
    const stats = questionsBank.getStats();
    let totalQuestions = 0;
    
    // ุญุณุงุจ ุฅุฌูุงูู ุนุฏุฏ ุงูุฃุณุฆูุฉ
    questionsBank.categories.forEach(category => {
      questionsBank.difficulties.forEach(difficulty => {
        if (questionsBank[category] && questionsBank[category][difficulty]) {
          totalQuestions += questionsBank[category][difficulty].length;
        }
      });
    });
    
    res.json({
      status: 200,
      success: true,
      data: {
        service: "Questions Bank API",
        status: "operational",
        total_categories: questionsBank.categories.length,
        total_difficulties: questionsBank.difficulties.length,
        total_questions: totalQuestions,
        last_update: new Date().toISOString()
      }
    });
    
  } catch (err) {
    res.status(500).json({
      status: 500,
      success: false,
      message: "ุงูุฎุฏูุฉ ุบูุฑ ูุชุงุญุฉ",
      error: err.message
    });
  }
});

module.exports = {
  path: "/api/tools",
  name: "Questions Bank API",
  type: "tools",
  url: `${global.t}/api/tools/tst?category=ุซูุงููุฉ&difficulty=ุณูู`,
  logo: "",
  description: "ุจูู ุฃุณุฆูุฉ ุถุฎู ูุดูู ุงูุซูุงูุฉ ุงูุนุงูุฉุ ุงูุฅุณูุงููุฉุ ูุฑุฉ ุงููุฏูุ ุงูุชุฑูููุ ุงูุนูููุ ูุงูุฑูุงุถูุงุช ุจูุณุชููุงุช ุตุนูุจุฉ ูุฎุชููุฉ",
  router
};